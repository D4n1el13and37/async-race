var N=Object.defineProperty;var E=(n,t,a)=>t in n?N(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a;var e=(n,t,a)=>(E(n,typeof t!="symbol"?t+"":t,a),a);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&c(u)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();function s(n){const t=document.createElement(n.tagName);return n.className&&(t.className=n.className),n.children&&n.children.forEach(a=>t.appendChild(a)),n.innerHTML&&(t.innerHTML=n.innerHTML),t}class o{constructor(t){e(this,"props");e(this,"buttonElement");this.props=t,this.buttonElement=document.createElement("button"),this.buttonElement.innerHTML=this.props.text,this.buttonElement.type=this.props.type?this.props.type:"button",this.buttonElement.disabled=!!this.props.isDisabled,this.buttonElement.className=`${t.className?t.className:""} button`,this.buttonElement.addEventListener("click",a=>{this.props.onClick(a)})}activate(){this.buttonElement.disabled=!1}deactivate(){this.buttonElement.disabled=!0}}class B{constructor(t){e(this,"counterElement");this.counterElement=s({tagName:"span",className:"car-counter",innerHTML:`Total cars: ${t}`})}updateCount(t){this.counterElement.innerText=` (${t})`}render(){return this.counterElement}}class l{static async getCars(...t){const a=t.length>0?t.join("&"):"";return await fetch(`${this.serverPath}?${a}`)}static async getCar(t){return(await fetch(`${this.serverPath}/${t}`)).json()}static async createCar(t){await fetch(this.serverPath,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}static async removeCar(t){await fetch(`${this.serverPath}/${t}`,{method:"DELETE"})}static async updateCar(t){await fetch(`${this.serverPath}/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,color:t.color})})}}e(l,"serverPath","http://127.0.0.1:3000/garage");class g{static async getWinners(...t){const a=t.length>0?t.join("&"):"";return await fetch(`${this.serverPath}?${a}`)}static async getCar(t){return(await fetch(`${this.serverPath}/${t}`)).json()}}e(g,"serverPath","http://127.0.0.1:3000/winners");class h{static async getData(t){let a;return t.requestTo==="GARAGE"?a=await l.getCars(`_page=${t.page},`,`_limit=${t.limit?t.limit:this.limitOnPage}`):a=await g.getWinners(`_page=${t.page},`,`_limit=${t.limit?t.limit:this.limitOnPage}`),await a.json()}static async updateTotalCars(t){let a;console.log("update total cars"),t==="GARAGE"?(a=await l.getCars("_limit=1"),console.log(a)):a=await g.getWinners("_limit=1");const c=a.headers.get("X-Total-Count");return this.totalCars=c||"0",console.log(this.totalCars),this.totalCars}}e(h,"totalCars","0"),e(h,"limitOnPage",7);class v{constructor(t){e(this,"carModel");this.carModel=s({tagName:"div",className:"car"}),this.carModel.innerHTML=`<svg fill=${t.color} stroke=${t.color}  width="60px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 511 511" xml:space="preserve"> <g> <path d="M127.5,320.712c-4.142,0-7.5,3.358-7.5,7.5c0,9.098-7.402,16.5-16.5,16.5S87,337.31,87,328.212s7.402-16.5,16.5-16.5c4.142,0,7.5-3.358,7.5-7.5s-3.358-7.5-7.5-7.5c-17.369,0-31.5,14.131-31.5,31.5s14.131,31.5,31.5,31.5s31.5-14.131,31.5-31.5C135,324.07,131.642,320.712,127.5,320.712z"/><path d="M439.5,320.712c-4.142,0-7.5,3.358-7.5,7.5c0,9.098-7.402,16.5-16.5,16.5s-16.5-7.402-16.5-16.5s7.402-16.5,16.5-16.5c4.142,0,7.5-3.358,7.5-7.5s-3.358-7.5-7.5-7.5c-17.369,0-31.5,14.131-31.5,31.5s14.131,31.5,31.5,31.5s31.5-14.131,31.5-31.5C447,324.07,443.642,320.712,439.5,320.712z"/><path d="M503.5,288.712H503v-6.304c0-13.742-5.964-26.747-16.158-35.733c-0.2-0.958-0.591-1.892-1.185-2.746l-0.945-1.361c-8.049-11.607-15.651-22.571-38.194-30.307c-18.562-6.369-46.213-10.211-87.702-12.046l-35.478-56.262c-0.059-0.092-0.119-0.183-0.181-0.273c-5.841-8.424-14.649-18.356-31.06-20.409c-11.969-1.499-118.593-13.824-175.893,14.205c-29.224,14.294-68.653,46.77-94.618,120.44c-0.693,1.614-1.31,3.272-1.835,4.976l-7.945,25.821H7.5c-4.142,0-7.5,3.358-7.5,7.5c0,4.04,3.196,7.324,7.196,7.485l-3.679,11.957c-1.462,4.75-0.606,9.769,2.347,13.767c2.953,3.999,7.497,6.292,12.468,6.292h22.126c3.724,31.49,30.567,56,63.042,56s59.318-24.51,63.042-56h185.916c3.724,31.49,30.567,56,63.042,56s59.318-24.51,63.042-56H495.5c4.142,0,7.5-3.358,7.5-7.5v-24.5h0.5c4.142,0,7.5-3.358,7.5-7.5S507.642,288.712,503.5,288.712z M340.674,199.565c-3.646-0.103-7.385-0.194-11.22-0.273l-21.52-43.47c1.97-0.347,3.386-0.37,3.394-0.37c0.493,0,0.974-0.051,1.44-0.141L340.674,199.565z M122.795,150.949c43.367-21.212,125.655-18.024,167.44-12.795c4.159,0.52,7.661,1.73,10.886,3.873c-2.374,0.691-4.927,1.683-7.392,3.111c-3.419,1.98-4.715,6.275-2.962,9.817l21.813,44.063c-3.728-0.046-7.429-0.085-11.092-0.11l-16.925-38.489c-3.312-7.531-10.408-12.838-18.521-13.851c-12.504-1.56-37.462-3.808-64.121-1.338c-33.152,3.072-58.941,12.369-76.65,27.634c-12.094,10.424-22.205,27.213-18.541,39.486c-3.905,0.775-7.706,1.58-11.379,2.421c-25.06,5.741-38.941,11.867-46.19,16.003C72.116,184.213,100.69,161.762,122.795,150.949z M123.892,209.279c-1.036-0.12-2.531-0.419-2.779-1.152c-1.272-3.746,3.53-14.919,13.951-23.901c36.563-31.513,108.076-25.398,129.122-22.772c2.902,0.362,5.449,2.279,6.647,5.004l14.25,32.406C220.266,198.958,166.3,202.446,123.892,209.279z M103.5,376.712c-26.743,0-48.5-21.757-48.5-48.5s21.757-48.5,48.5-48.5s48.5,21.757,48.5,48.5S130.243,376.712,103.5,376.712z M415.5,376.712c-26.743,0-48.5-21.757-48.5-48.5s21.757-48.5,48.5-48.5c26.728,0,48.474,21.733,48.499,48.455c0,0.015-0.002,0.03-0.002,0.045s0.002,0.03,0.002,0.045C463.974,354.979,442.228,376.712,415.5,376.712z M488,320.712h-9.458c-3.724-31.49-30.567-56-63.042-56s-59.318,24.51-63.042,56h-17.143c0.816-9.8,3.232-19.292,7.224-28.304c1.678-3.787-0.033-8.217-3.82-9.895c-3.787-1.676-8.217,0.033-9.895,3.82c-4.845,10.937-7.707,22.472-8.553,34.379H190.719c-1.131-15.599-5.767-30.779-13.593-44.294c-2.075-3.585-6.665-4.806-10.249-2.732c-3.584,2.076-4.808,6.664-2.732,10.249c6.505,11.234,10.426,23.82,11.525,36.777h-9.129c-3.724-31.49-30.567-56-63.042-56s-59.318,24.51-63.042,56H18.332c-0.082,0-0.252,0-0.402-0.203c-0.15-0.203-0.1-0.366-0.076-0.444l5.032-16.353H31.5c4.142,0,7.5-3.358,7.5-7.5s-3.358-7.5-7.5-7.5h-3.999l4.395-14.283c1.177-3.757,2.39-7.404,3.633-10.953c3.13-7.063,8.493-12.692,15.15-15.749c11.583-5.319,23.971-8.016,36.821-8.016c22.668,0,44.229,8.562,60.711,24.107c3.013,2.842,7.759,2.703,10.602-0.31c2.842-3.013,2.703-7.76-0.31-10.602c-13.82-13.036-30.694-21.871-48.909-25.829c64.644-12.78,153.526-14.067,217.76-12.827c56.226,1.087,92.335,4.883,113.49,11.931c-5.689-0.964-11.484-1.471-17.345-1.471c-30.173,0-58.776,13.127-78.476,36.016c-2.702,3.14-2.347,7.875,0.792,10.577s7.875,2.347,10.577-0.792c16.847-19.574,41.307-30.801,67.107-30.801c18.211,0,35.708,5.524,50.602,15.977c8.703,6.107,13.898,16.096,13.898,26.72v6.304h-0.5c-4.142,0-7.5,3.358-7.5,7.5s3.358,7.5,7.5,7.5h0.5V320.712z"/></g></svg>`}render(){return this.carModel}}class P{constructor(t){e(this,"startRaceButton");e(this,"resetCarButton");e(this,"car");e(this,"element");this.startRaceButton=new o({text:"D",className:"control-btn start",onClick:()=>console.log("selected")}),this.resetCarButton=new o({text:"R",className:"control-btn reset",onClick:()=>console.log("selected")}),this.car=new v(t),this.element=s({tagName:"div",className:"controll-block",children:[this.startRaceButton.buttonElement,this.resetCarButton.buttonElement,this.car.render()]})}}class f{constructor(t){e(this,"selectButton");e(this,"removeButton");e(this,"element");this.selectButton=new o({text:"Select",className:"setting-btn",onClick:()=>this.handleCarEdit(t.id)}),this.removeButton=new o({text:"Remove",className:"setting-btn",onClick:()=>this.handleCarRemove(t.id)});const a=s({tagName:"span",innerHTML:t.name});this.element=s({tagName:"div",className:"controll-block",children:[this.selectButton.buttonElement,this.removeButton.buttonElement,a]})}handleCarRemove(t){l.removeCar(t)}handleCarEdit(t){l.getCar(t).then(a=>console.log(a))}}class w{constructor(t){e(this,"trackElement");const a=new f(t),c=new P(t);this.trackElement=s({tagName:"div",className:"track",children:[a.element,c.element]})}}class b{constructor(t){e(this,"tracksBoard");e(this,"currentPage");this.tracksBoard=s({tagName:"div",className:"a-lot-of-tracks"}),this.currentPage=t}render(t){this.tracksBoard.innerHTML="";const a=s({tagName:"span",className:"page-num",innerHTML:`Page #${t}`});return this.updateList(t),this.tracksBoard.appendChild(a),this.tracksBoard}updateList(t){this.tracksBoard.innerHTML="",h.getData({page:t,requestTo:this.currentPage}).then(a=>{a.forEach(c=>{const r=new w(c);this.tracksBoard.appendChild(r.trackElement)})})}}class p{constructor(t){e(this,"buttonPrevPage");e(this,"buttonNextPage");e(this,"gameBoardComponent");e(this,"totalCarsElement");e(this,"currentPage",1);e(this,"headLine");e(this,"updateList");const a=h.updateTotalCars(t.page);this.buttonPrevPage=new o({text:"<---",onClick:()=>{this.currentPage>1&&(this.currentPage-=1,this.gameBoardComponent.render(this.currentPage)),this.currentPage<2&&this.buttonPrevPage.deactivate()}}),this.buttonPrevPage.deactivate(),this.buttonNextPage=new o({text:"--->",onClick:()=>{this.buttonPrevPage.activate(),this.currentPage+=1,this.gameBoardComponent.render(this.currentPage)}}),this.totalCarsElement=new B(0),a.then(c=>{this.totalCarsElement.render(),Math.ceil(parseInt(c)/7)<=this.currentPage?this.buttonNextPage.deactivate():this.buttonNextPage.activate()}),this.updateCarCount(t.page),this.headLine=s({tagName:"h2",className:"title",innerHTML:`${t.title}`}),this.headLine.appendChild(this.totalCarsElement.render()),this.gameBoardComponent=new b(t.page),this.updateList=()=>this.gameBoardComponent.updateList(this.currentPage)}render(){return s({tagName:"div",className:"page",children:[this.headLine,this.gameBoardComponent.render(this.currentPage),this.buttonPrevPage.buttonElement,this.buttonNextPage.buttonElement]})}async updateCarCount(t){const a=await h.updateTotalCars(t);this.totalCarsElement.updateCount(parseInt(a))}}class d{constructor(t){e(this,"props");e(this,"onChange");e(this,"inputElement");this.props=t,this.inputElement=document.createElement("input"),this.inputElement.type=this.props.type,this.inputElement.required=!1,this.inputElement.className=`input ${t.className?t.className:""}`,this.inputElement.placeholder=t.placeholder?t.placeholder:"",this.onChange=this.props.onChange,this.inputElement.addEventListener("input",this.handleInput.bind(this))}handleInput(){const{value:t}=this.inputElement;this.onChange(t)}getValue(){return this.inputElement.value}setValue(t){this.inputElement.value=t}clearValue(){this.inputElement.value=""}}class k{constructor(t){e(this,"createCarName");e(this,"createCarColor");e(this,"createCarButton");e(this,"createCarBlock");e(this,"onCarAdd");this.onCarAdd=t,this.createCarName=new d({type:"text",placeholder:"Write car-name",onChange:()=>{}}),this.createCarColor=new d({type:"color",className:"color-input",onChange:()=>{}}),this.createCarButton=new o({text:"Create",onClick:()=>this.createCar()}),this.createCarBlock=s({tagName:"div",className:"car-create block",children:[this.createCarName.inputElement,this.createCarColor.inputElement,this.createCarButton.buttonElement]})}createCar(){const t=this.createCarName.getValue(),a=this.createCarColor.getValue();l.createCar({name:t,color:a}).then(()=>{console.log("add car"),this.onCarAdd()}),this.createCarName.clearValue()}}class y{constructor(){e(this,"editCarName");e(this,"editCarColor");e(this,"editCarButton");e(this,"editCarBlock");this.editCarName=new d({type:"text",onChange:()=>{}}),this.editCarColor=new d({type:"color",className:"color-input",onChange:()=>{}}),this.editCarButton=new o({text:"Update",onClick:()=>this.handleUpdate()}),this.editCarBlock=s({tagName:"div",className:"car-create block",children:[this.editCarName.inputElement,this.editCarColor.inputElement,this.editCarButton.buttonElement]})}handleUpdate(){l.updateCar({color:this.editCarColor.getValue(),name:this.editCarName.getValue(),id:2})}}const m=["Bugatti","BMW","Mercedes","Toyota","Citroen","Nissan","Volga","Ford","Honda","Acura","Skoda","Chevrolet","Volks Wagen"],C=["Corvete","Skyline","X5","X7","Chaser","Corolla","Camry","Land-Cruiser","Mustang","F-16","CRV","Supra","Tahoe","Wagon","Golf","Fabia","Caroq","Codiak","S2000","C4","Siber","31028"],M=()=>`#${Math.floor(Math.random()*16777215).toString(16)}`,L=()=>m[Math.floor(Math.random()*m.length)],T=()=>C[Math.floor(Math.random()*C.length)];function x(){const n=[];for(let t=0;t<100;t++)n.push({color:M(),name:`${L()} ${T()}`});return n}class ${constructor(t){e(this,"raceStart");e(this,"resetCars");e(this,"generateCars");e(this,"editCarBlock");e(this,"onCarAdd");this.onCarAdd=t,this.raceStart=new o({text:"Race",onClick:()=>console.log("The race is started")}),this.resetCars=new o({text:"Reset",onClick:()=>console.log("you reset all car")}),this.generateCars=new o({text:"Generate Cars",onClick:()=>this.createCars()}),this.editCarBlock=s({tagName:"div",className:"car-create block",children:[this.raceStart.buttonElement,this.resetCars.buttonElement,this.generateCars.buttonElement]})}async createCars(){x().forEach(async a=>{await l.createCar({color:a.color,name:a.name})}),this.onCarAdd()}}class S{constructor(t){e(this,"createCarBlock");e(this,"editCarBlock");e(this,"raceContoll");this.createCarBlock=new k(t),this.editCarBlock=new y,this.raceContoll=new $(t)}render(){return s({tagName:"div",className:"car-settings-container",children:[this.createCarBlock.createCarBlock,this.editCarBlock.editCarBlock,this.raceContoll.editCarBlock]})}}class G{constructor(){e(this,"carSetting");e(this,"pageInfo");this.pageInfo=new p({title:"Garage",page:"GARAGE"});const t=async()=>{this.pageInfo.updateCarCount("GARAGE"),this.pageInfo.updateList()};this.carSetting=new S(t)}render(){return s({tagName:"div",className:"garage-container",children:[this.carSetting.render(),this.pageInfo.render()]})}}class A{constructor(){e(this,"pageComponent");this.pageComponent=new p({title:"Winners",page:"WINNERS"})}render(){return s({tagName:"div",className:"garage-container",children:[this.pageComponent.render()]})}}class R{constructor(){e(this,"currentPage","GARAGE");e(this,"toGarageButton");e(this,"toWinnerButton");e(this,"garagePage");e(this,"winnersPage");this.toGarageButton=new o({text:"Garage",onClick:()=>{this.changePage("GARAGE"),this.toWinnerButton.activate(),this.toGarageButton.deactivate()}}),this.toGarageButton.deactivate(),this.toWinnerButton=new o({text:"Winners",onClick:()=>{this.changePage("WINNERS"),this.toGarageButton.activate(),this.toWinnerButton.deactivate()}}),this.garagePage=new G,this.winnersPage=new A}changePage(t){this.currentPage=t,this.render()}render(){const t=this.currentPage==="GARAGE"?this.garagePage.render():this.winnersPage.render(),a=s({tagName:"div",className:"container",children:[this.toGarageButton.buttonElement,this.toWinnerButton.buttonElement,t]});document.body.innerHTML="",document.body.appendChild(a)}}const H=new R;H.render();
